<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // Promise
      // promise adalah sebuah object yang merepresentasikan keberhasilan sebuah event yang asynchronous di masa yang akan datang
      // janji (terpenuhi / ingkar)
      // states (fullfiled / rejected / pending)
      // callback (resolve / reject / finally)
      // aksi (then / catch)

      // cara menggunakan Promise
      // nama_variable = new Promise((resolve, reject) {})
      // Promise memiliki dua parameter callback yaitu resolve dan reject

      // contoh 1
      //   let ditepati = true;
      //   let ditepati = false;
      //   const janji1 = new Promise((resolve, reject) => {
      //     if (ditepati) {
      //       resolve("Janji telah ditepati!");
      //     } else {
      //       reject("Ingkar janji...");
      //     }
      //   });

      //   janji1
      //     .then((response) => console.log("oke! : " + response)) // .then ini merupakan kondisi ketika resolve
      //     .catch((response) => console.log("NOT OK! : " + response)); // .catch merupakan kondisi ketika reject

      // contoh 2
      //   let ditepati = false;
      //   const janji2 = new Promise((resolve, reject) => {
      //     if (ditepati) {
      //       setTimeout(() => {
      //         resolve("Ditepati setelah beberapa waktu");
      //       }, 2000);
      //     } else {
      //       setTimeout(() => {
      //         resolve("Tidak ditepati setelah beberapa waktu");
      //       }, 2000);
      //     }
      //   });

      //   console.log("mulai");
      //   //   console.log(janji2.then(() => console.log(janji2)));
      //   //   console.log(janji2.catch(() => console.log(janji2)));
      //   janji2
      //     .finally(() => console.log("selesai menunggu")) // finally muncul ketika pending selesai / sebagai penanda pending/loading selesai.
      //     .then((response) => console.log("oke! : " + response)) // .then ini merupakan kondisi ketika resolve
      //     .catch((response) => console.log("NOT OK! : " + response)); // .catch merupakan kondisi ketika reject
      //   console.log("selesai");

      // Promise.all() => (untuk menjalakan banyak promise sekaligus)
      const film = new Promise((resolve) => {
        setTimeout(() => {
          resolve([
            {
              judul: "Avengers",
              sutradara: "Shandika Galih",
              pemeran: "Doddy, Erik",
            },
          ]);
        }, 1000);
      });

      const cuaca = new Promise((resolve) => {
        setTimeout(() => {
          resolve([
            {
              kota: "Bandung",
              temp: 26,
              kondisi: "Cerah Berawan",
            },
          ]);
        }, 500);
      });

      //   film.then((response) => console.log(response));
      //   cuaca.then((response) => console.log(response)); dalam kasus ini cuaca akan muncul terlebih dahulu karena setTimeout cuaca lebih cepat daripada film

      Promise.all([film, cuaca])
        //   .then(response => console.log(response));
        .then((response) => {
          const [film, cuaca] = response;
          console.log(film);
          console.log(cuaca);
        });
    </script>
  </body>
</html>
